<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <title>View Definition Extension</title>
   </head>

   <body>
      <h2>
         View Definition Extension
      </h2>
      <p>
		The Portolan models cartography comes with a main visualization tool
		based on Prefuse graph library. This main tool visualizes user's models
		as they are, in their completeness. And other visualization tools which
		could be added to Portolan as plug-ins will also display views of the
		full user models.
      </p>
      <p>
        In order to filter input model and get a view on parts of this model,
        users may write ATL transformations which compute the input model and
        realize a subset of it. The Portolan <em>View Definitions</em> mechanism
        give the ability to declare such filters and get corresponding button
        in the Portolan main tool bar (left side of the <em>Visualization</em>
        perspective).
      </p>
      <h3>
      	Syntax
      </h3>
      <p>
      	The extension point ID is: 
      	<code>fr.inria.portolan.visualization.viewDefinition</code>.
      </p>
      <p>
        Each View Definition is a set of files:
      	<ul>
      		<li>an ATL transformation: it is the code which produce a filtered
      		  subset of the referent model.
      		<li>the ASM compiled transformation: it should be generated by
      		  builder. If not, add the ATL nature to your project.
      		<li>an icon for the button: this optional file (a PNG image with
      		  heigth =< 32 pixels and width =< 64 pixels) will be displayed
      		  in the Visualization bar (left). If lacking or troubling, the
      		  Portolan default icon will be used.
      		<li>the VD declaration file (*.vd): it is the specification for 
      		  your View Definition. Portolan will detect it and try to insert
      		  corresponding button in its Visualization bar.
      	</ul>
      </p>
      <p>
      	The <code>*.vd</code> extension file attributes are:
      	<ul>
      		<li><code>id</code>: String (OPTIONAL).  The ID which relies
      		  a button to the corresponding view (so is also button ID).
      		<li><code>name</code>: String (OPTIONAL). The view label.
      		<li><code>categoryId</code>: String (REQUIRED). Category
      		  of the VD command.
      		<li><code>commandId</code>: String (REQUIRED). The id Eclipse
      		  will rely on to find it and execute corresponding action.
      		<li><code>iconPath</code>: String (OPTIONAL). The path of the
      		  icon, relative to the project root. 
      		<li><code>text</code>: String (REQUIRED). The label for the
      		  corresponding button.
       		<li><code>transformationPath</code>: String (REQUIRED).
       		  The path of the ASM file, relative to the project root.
      		<li><code>postName</code>: String (OPTIONAL). The post-name
      		  to be added to the subset model.
      		<li><code>editorId</code>: String (REQUIRED). The editor to
      		  use to display the subset model.
       		<li><code>shortMM</code>: String (REQUIRED). This is the short
       		  code used in your ATL transformation to identify the input
       		  metamodel (and output should be the same, as you generate a
       		  filtered version the input model).
     	</ul>
      </p>
      <p>
        As a View Definition reuses an existing editor, it is a completely
        declarative process, even the ATL transformation part ;-).
      </p>
      <h3>
      	Effects
      </h3>
      <p>
      	The Portolan Visualization plug-in has a specific builder which 
      	inspects Portolan referent project in search of *.vd files. For
      	each <code>*.vd</code> it found, it tries to create the corresponding button
      	(and underlying command) into the left bar of the Visualization
      	perspective.
      </p>
      <p>
        When a user clicks on such a View Definition button, the corresponding
        command is run: it applies the transformation ASM on the referent
        model and passes the resulting model to the specified editor. The
        result is a visualization with only the filtered elements.
      </p>
      <h3>
      	Example
      </h3>
      <p>
      	A Portolan View Definition is declared as any other extension.
      	As a good example, look at the parameters below, which use Portolan
      	Prefuse editor as final display:
      	<ul>
      	  <li><code>fr.inria.portolan.visualization.viewDefinition</code> extension:
      	    <ul>
      	      <li><code>view_definition.viewId</code>: <i>my.domain.view.definition.one</i>
              <li><code>view_definition.categoryId</code>:
                <i>fr.inria.portolan.visualization.prefuse.commands.viewDefinitionCategory</i>
              <li><code>view_definition.iconPath</code>: <i>Transformation/ViewDefinitions/myIcon.png</i>
              <li><code>view_definition.commandId</code>: <i>my.domain.view.definition.command.one</i>
              <li><code>view_definition.name</code>: <i>My View Definition</i>
              <li><code>view_definition.text</code>: <i>View One</i>
              <li><code>view_definition.transformationPath</code>:
                <i>Transformation/ViewDefinitions/myViewOne.asm</i>
              <li><code>view_definition.postName</code>: <i>_ViewOne</i>
              <li><code>view_definition.editorId</code>:
                <i>fr.inria.portolan.visualization.prefuse.ui.PrefuseEditor</i>
              <li><code>view_definition.shortMM</code>: <i>Carto</i>
            </ul>
      	</ul>
      </p>
   </body>
</html>
